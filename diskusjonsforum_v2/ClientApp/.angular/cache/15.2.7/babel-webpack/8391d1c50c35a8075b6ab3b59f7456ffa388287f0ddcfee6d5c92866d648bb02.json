{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet CommentsComponent = class CommentsComponent {\n  // initialises routes and service for the constructor\n  constructor(commentsService, _http, _router, route, _commentService) {\n    this.commentsService = commentsService;\n    this._http = _http;\n    this._router = _router;\n    this.route = route;\n    this._commentService = _commentService;\n    this.viewTitle = \"Table\";\n    this.comments = [];\n    this.isEditing = false;\n  }\n  //gets the comments using HttpClient from \"api/comments\"\n  getComments() {\n    this._http.get('api/comments').subscribe(data => {\n      console.log('All', JSON.stringify(data));\n      this.comments = data;\n    }, error => {\n      console.error('Error getting comments', error);\n      // Handle the error, e.g., display an error message to the user\n      // For now, let's log a generic error message to the console\n      console.error('An error occurred while fetching comments. Please try again later.');\n    });\n  }\n  // retrieves the comments that belongs to the thread by threadId with an if statement\n  getCommentsByThread() {\n    if (this.parentThreadId !== undefined && this.parentThreadId !== null) {\n      this.commentsService.getCommentsByThreadId(this.parentThreadId).subscribe(comments => this.comments = comments, error => console.error('Error fetching comments'));\n    } else {\n      // if the parentThreadId is null or not defined the error is handled and the errormessage is logged to the console\n      console.error('Cannot fetch comments, parentThreadId is undefined.');\n    }\n  }\n  // gives the comment an commentId and sets parentThreadID to the thread it belongs to\n  navigateToCommentform(comment) {\n    const navigationExtras = {\n      queryParams: {\n        commentId: comment ? comment.commentId.toString() : undefined,\n        parentThreadId: this.parentThreadId.toString()\n      }\n    };\n    // navigates to /commentForm and specified nagivationExtras\n    this._router.navigate(['/commentForm'], navigationExtras);\n  }\n  ngOnInit() {\n    console.log('CommentsComponent created');\n    this.getComments();\n  }\n  updateComment(comment) {\n    this.commentsService.updateComment(comment).subscribe(() => {\n      console.log('Comment updated');\n      this.getCommentsByThread(); // Refresh comments after update\n    }, error => console.error('Error updating comment', error));\n  }\n  deleteComment(commentId) {\n    this.commentsService.deleteComment(commentId).subscribe(() => {\n      console.log('Comment deleted');\n      this.getCommentsByThread(); // Refresh comments after deletion\n    }, error => console.error('Error deleting comment', error));\n  }\n};\nCommentsComponent = __decorate([Component({\n  selector: 'app-comment-component',\n  templateUrl: './comments.component.html' //path to the HTML file structure\n  // styleUrls: ['./comment.component.css']\n})], CommentsComponent);\nexport { CommentsComponent };","map":{"version":3,"mappings":"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","names":["Component","CommentsComponent","constructor","commentsService","_http","_router","route","_commentService","getComments","get","subscribe","data","console","log","JSON","stringify","comments","error","getCommentsByThread","parentThreadId","undefined","getCommentsByThreadId","navigateToCommentform","comment","navigationExtras","queryParams","commentId","toString","navigate","ngOnInit","updateComment","deleteComment","selector","templateUrl"],"sourceRoot":"","sources":["C:\\Users\\Eier\\RiderProjects\\diskusjonsforum_v2\\diskusjonsforum_v2\\ClientApp\\src\\app\\comments\\comments.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Comment } from './comments';\r\nimport {CommentsService} from \"./comments.service\";\r\nimport {ActivatedRoute, NavigationExtras, Router} from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-comment-component', // custom HTML tag\r\n  templateUrl: './comments.component.html'//path to the HTML file structure\r\n\r\n  // styleUrls: ['./comment.component.css']\r\n})\r\n\r\nexport class CommentsComponent implements OnInit {\r\n  viewTitle: string = \"Table\";\r\n  comments: Comment[] = [];\r\n  parentThreadId!: number;\r\n  isEditing = false;\r\n\r\n  // initialises routes and service for the constructor\r\n  constructor(\r\n    private commentsService: CommentsService,\r\n    private _http: HttpClient,\r\n    private _router: Router,\r\n    private route: ActivatedRoute,\r\n    private _commentService: CommentsService) {\r\n  }\r\n\r\n  //gets the comments using HttpClient from \"api/comments\"\r\n  getComments(): void {\r\n    this._http.get<Comment[]>('api/comments').subscribe(data => {\r\n        console.log('All', JSON.stringify(data));\r\n        this.comments = data;\r\n      },\r\n      (error) => {\r\n        console.error('Error getting comments', error);\r\n        // Handle the error, e.g., display an error message to the user\r\n        // For now, let's log a generic error message to the console\r\n        console.error('An error occurred while fetching comments. Please try again later.')\r\n      });\r\n  }\r\n\r\n  // retrieves the comments that belongs to the thread by threadId with an if statement\r\n  getCommentsByThread(): void {\r\n    if (this.parentThreadId !== undefined && this.parentThreadId !== null) {\r\n      this.commentsService.getCommentsByThreadId(this.parentThreadId).subscribe(\r\n        (comments) => (this.comments = comments),\r\n        (error) => console.error('Error fetching comments')\r\n      )\r\n    } else {\r\n      // if the parentThreadId is null or not defined the error is handled and the errormessage is logged to the console\r\n      console.error('Cannot fetch comments, parentThreadId is undefined.')\r\n    }\r\n  }\r\n\r\n  // gives the comment an commentId and sets parentThreadID to the thread it belongs to\r\n  navigateToCommentform(comment?: Comment) {\r\n    const navigationExtras: NavigationExtras = {\r\n      queryParams: {\r\n        commentId: comment ? comment.commentId.toString() : undefined,\r\n        parentThreadId: this.parentThreadId.toString()\r\n      }\r\n    };\r\n    // navigates to /commentForm and specified nagivationExtras\r\n    this._router.navigate(['/commentForm'], navigationExtras);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log('CommentsComponent created');\r\n    this.getComments();\r\n  }\r\n  updateComment(comment: Comment): void {\r\n    this.commentsService.updateComment(comment).subscribe(\r\n      () => {\r\n        console.log('Comment updated');\r\n        this.getCommentsByThread(); // Refresh comments after update\r\n      },\r\n      (error) => console.error('Error updating comment', error)\r\n    );\r\n  }\r\n\r\n  deleteComment(commentId: number): void {\r\n    this.commentsService.deleteComment(commentId).subscribe(\r\n      () => {\r\n        console.log('Comment deleted');\r\n        this.getCommentsByThread(); // Refresh comments after deletion\r\n      },\r\n      (error) => console.error('Error deleting comment', error)\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}