{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./nav-menu.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"searchBarElement\"];\nexport class NavMenuComponent {\n  // Event handler for document click\n  handleDocumentClick(event) {\n    const clickedElement = event.target;\n    // Check if the clicked element is outside the search bar\n    if (!this.searchBarElement.nativeElement.contains(clickedElement)) {\n      // Reset the search input when clicking outside the search bar\n      this.handlesearchinput = '';\n      // Close the search results dropdown\n      this.searchResults = [];\n    }\n  }\n  toggle() {\n    this.isExpanded = !this.isExpanded;\n  }\n  // initialises router and service for controllers\n  constructor(navMenuService, router, _location) {\n    this.navMenuService = navMenuService;\n    this.router = router;\n    this._location = _location;\n    this.isExpanded = false;\n    this.searchResults = [];\n    this.handlesearchinput = '';\n  }\n  // a function that handles the input in the search bar\n  handleSearchInput() {\n    const searchTerm = this.handlesearchinput.trim().toLowerCase();\n    // checks if there is any input, if there is, a search results is displayed in a dropdown with results based on the input\n    if (searchTerm.length >= 1) {\n      //searches for threads related to the \"searchTerm\"\n      this.navMenuService.searchThreads(searchTerm).subscribe({\n        next: data => {\n          this.searchResults = data;\n          const searchResults = document.getElementById('searchResultsDropdown');\n          searchResults.style.display = this.searchResults.length > 0 ? 'block' : 'none';\n        },\n        error: error => {\n          console.error('Error:', error);\n        }\n      });\n    } else {\n      // if there is no search result the dropdown won't be shown\n      this.searchResults = [];\n      const searchResults = document.getElementById('searchResultsDropdown');\n      searchResults.style.display = 'none';\n    }\n  }\n  goBack() {\n    this._location.back();\n  }\n  navigateToThreadform(thread) {\n    this.router.navigate(['/thread-view', thread.threadId]); // navigates to the thread view\n  }\n}\n\nNavMenuComponent.ɵfac = function NavMenuComponent_Factory(t) {\n  return new (t || NavMenuComponent)(i0.ɵɵdirectiveInject(i1.NavMenuService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.Location));\n};\nNavMenuComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NavMenuComponent,\n  selectors: [[\"app-nav-menu\"]],\n  viewQuery: function NavMenuComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchBarElement = _t.first);\n    }\n  },\n  hostBindings: function NavMenuComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"click\", function NavMenuComponent_click_HostBindingHandler($event) {\n        return ctx.handleDocumentClick($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  decls: 0,\n  vars: 0,\n  template: function NavMenuComponent_Template(rf, ctx) {},\n  styles: [\"a.navbar-brand[_ngcontent-%COMP%] {\\r\\n  white-space: normal;\\r\\n  text-align: center;\\r\\n  word-break: break-all;\\r\\n}\\r\\n\\r\\nhtml[_ngcontent-%COMP%] {\\r\\n  font-size: 14px;\\r\\n}\\r\\n@media (min-width: 768px) {\\r\\n  html[_ngcontent-%COMP%] {\\r\\n    font-size: 16px;\\r\\n  }\\r\\n}\\r\\n\\r\\n.box-shadow[_ngcontent-%COMP%] {\\r\\n  box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05);\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jc3MvbmF2LW1lbnUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjtBQUNBO0VBQ0U7SUFDRSxlQUFlO0VBQ2pCO0FBQ0Y7O0FBRUE7RUFDRSw4Q0FBOEM7QUFDaEQiLCJzb3VyY2VzQ29udGVudCI6WyJhLm5hdmJhci1icmFuZCB7XHJcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgd29yZC1icmVhazogYnJlYWstYWxsO1xyXG59XHJcblxyXG5odG1sIHtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbn1cclxuQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7XHJcbiAgaHRtbCB7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgfVxyXG59XHJcblxyXG4uYm94LXNoYWRvdyB7XHJcbiAgYm94LXNoYWRvdzogMCAuMjVyZW0gLjc1cmVtIHJnYmEoMCwgMCwgMCwgLjA1KTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;AAYA,OAAM,MAAOA,gBAAgB;EAQ3B;EAEAC,mBAAmB,CAACC,KAAiB;IACnC,MAAMC,cAAc,GAAGD,KAAK,CAACE,MAAqB;IAElD;IACA,IAAI,CAAC,IAAI,CAACC,gBAAgB,CAACC,aAAa,CAACC,QAAQ,CAACJ,cAAc,CAAC,EAAE;MACjE;MACA,IAAI,CAACK,iBAAiB,GAAG,EAAE;MAE3B;MACA,IAAI,CAACC,aAAa,GAAG,EAAE;;EAE3B;EAEAC,MAAM;IACJ,IAAI,CAACC,UAAU,GAAG,CAAC,IAAI,CAACA,UAAU;EACpC;EACA;EACAC,YACUC,cAA8B,EAC9BC,MAAc,EACdC,SAAmB;IAFnB,mBAAc,GAAdF,cAAc;IACd,WAAM,GAANC,MAAM;IACN,cAAS,GAATC,SAAS;IA7BnB,eAAU,GAAG,KAAK;IAClB,kBAAa,GAAa,EAAE;IAC5B,sBAAiB,GAAW,EAAE;EA4B1B;EAEJ;EACAC,iBAAiB;IACf,MAAMC,UAAU,GAAG,IAAI,CAACT,iBAAiB,CAACU,IAAI,EAAE,CAACC,WAAW,EAAE;IAE9D;IACA,IAAIF,UAAU,CAACG,MAAM,IAAI,CAAC,EAAE;MAC1B;MACA,IAAI,CAACP,cAAc,CAACQ,aAAa,CAACJ,UAAU,CAAC,CAACK,SAAS,CAAC;QACtDC,IAAI,EAAGC,IAAI,IAAI;UACb,IAAI,CAACf,aAAa,GAAGe,IAAI;UACzB,MAAMf,aAAa,GAAGgB,QAAQ,CAACC,cAAc,CAAC,uBAAuB,CAAgB;UACrFjB,aAAa,CAACkB,KAAK,CAACC,OAAO,GAAG,IAAI,CAACnB,aAAa,CAACW,MAAM,GAAG,CAAC,GAAG,OAAO,GAAG,MAAM;QAChF,CAAC;QACDS,KAAK,EAAGA,KAAK,IAAI;UACfC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;QAChC;OACD,CAAC;KACH,MAAM;MACL;MACA,IAAI,CAACpB,aAAa,GAAG,EAAE;MACvB,MAAMA,aAAa,GAAGgB,QAAQ,CAACC,cAAc,CAAC,uBAAuB,CAAgB;MACrFjB,aAAa,CAACkB,KAAK,CAACC,OAAO,GAAG,MAAM;;EAExC;EAEAG,MAAM;IACJ,IAAI,CAAChB,SAAS,CAACiB,IAAI,EAAE;EACvB;EAEAC,oBAAoB,CAACC,MAAc;IACjC,IAAI,CAACpB,MAAM,CAACqB,QAAQ,CAAC,CAAC,cAAc,EAAED,MAAM,CAACE,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC3D;;;AAhEWpC,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;QAAhBA,gBAAgB;EAAAqC;EAAAC;IAAA;;;;;;;;;;;eAAhBC,+BACN;MAAA","names":["NavMenuComponent","handleDocumentClick","event","clickedElement","target","searchBarElement","nativeElement","contains","handlesearchinput","searchResults","toggle","isExpanded","constructor","navMenuService","router","_location","handleSearchInput","searchTerm","trim","toLowerCase","length","searchThreads","subscribe","next","data","document","getElementById","style","display","error","console","goBack","back","navigateToThreadform","thread","navigate","threadId","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\linn2\\RiderProjects\\diskusjonsforum_v2\\diskusjonsforum_v2\\ClientApp\\src\\app\\nav-menu\\nav-menu.component.ts"],"sourcesContent":["import { Component, ElementRef, HostListener, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Thread } from '../threads/threads';\r\nimport { NavMenuService } from './nav-menu.service';\r\nimport {Location} from '@angular/common';\r\n\r\n\r\n@Component({\r\n  selector: 'app-nav-menu',\r\n  templateUrl: './nav-menu.component.html',\r\n  styleUrls: ['../../css/nav-menu.component.css']\r\n})\r\nexport class NavMenuComponent {\r\n  isExpanded = false;\r\n  searchResults: Thread[] = [];\r\n  handlesearchinput: string = '';\r\n\r\n  // Add a reference to the search bar element\r\n  @ViewChild('searchBarElement') searchBarElement!: ElementRef;\r\n\r\n  // Event handler for document click\r\n  @HostListener('document:click', ['$event'])\r\n  handleDocumentClick(event: MouseEvent): void {\r\n    const clickedElement = event.target as HTMLElement;\r\n\r\n    // Check if the clicked element is outside the search bar\r\n    if (!this.searchBarElement.nativeElement.contains(clickedElement)) {\r\n      // Reset the search input when clicking outside the search bar\r\n      this.handlesearchinput = '';\r\n\r\n      // Close the search results dropdown\r\n      this.searchResults = [];\r\n    }\r\n  }\r\n\r\n  toggle() {\r\n    this.isExpanded = !this.isExpanded;\r\n  }\r\n  // initialises router and service for controllers\r\n  constructor(\r\n    private navMenuService: NavMenuService,\r\n    private router: Router,\r\n    private _location: Location\r\n  ) { }\r\n\r\n  // a function that handles the input in the search bar\r\n  handleSearchInput() {\r\n    const searchTerm = this.handlesearchinput.trim().toLowerCase();\r\n\r\n    // checks if there is any input, if there is, a search results is displayed in a dropdown with results based on the input\r\n    if (searchTerm.length >= 1) {\r\n      //searches for threads related to the \"searchTerm\"\r\n      this.navMenuService.searchThreads(searchTerm).subscribe({\r\n        next: (data) => {\r\n          this.searchResults = data;\r\n          const searchResults = document.getElementById('searchResultsDropdown') as HTMLElement;\r\n          searchResults.style.display = this.searchResults.length > 0 ? 'block' : 'none';\r\n        },\r\n        error: (error) => {\r\n          console.error('Error:', error);\r\n        }\r\n      });\r\n    } else {\r\n      // if there is no search result the dropdown won't be shown\r\n      this.searchResults = [];\r\n      const searchResults = document.getElementById('searchResultsDropdown') as HTMLElement;\r\n      searchResults.style.display = 'none';\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this._location.back();\r\n  }\r\n\r\n  navigateToThreadform(thread: Thread) {\r\n    this.router.navigate(['/thread-view', thread.threadId]); // navigates to the thread view\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}